# 扫码购项目开发文档

[toc]

## 一、项目介绍

本项目是一个扫码支付类的小程序, 能够解决用户在线自由支付商品的问题.本项目采用的技术栈未:wxml、wxss、wxs、es6、javascript、h5、css3、....

## 二、项目收获

1. 复习一遍小程序的语法
2. 掌握项目的开发流程
3. 掌握小程序中微信支付的开发
4. .......

## 三、创建项目

1. 申请小程序开发账号

2. 下载小程序开发工具

3. 创建项目

4. 使用git对项目进行版本控制

   

## 四、 创建TabBar页面以及配置路由

1. 创建tabbar页面
2. 配置路由
3. 创建tabbar

## 五、实现主页布局以及扫描商品条形码

1. 实现页面布局
2. 点击扫码按钮,开启扫码
3. 扫码完成获取商品条形码
4. 调用获取商品信息接口
5. 获取到商品信息之后跳转到购物车页面



## 六、实现购物车页面布局以及商品计算

1. 实现页面布局
2. 存储商品数据到本地
3. 动态渲染数据
4. 实现商品数量的加减
5. 实现商品总价的计算
6. 实现商品的继续添加
7. 实现去结算进入订单页



## 七、实现订单页布局以及功能

1. 实现页面布局
2. 实现商品的展开与收起
3. 实现余额抵扣
4. 拉起支付
5. 支付成功跳转到支付成功页面



## 八、解决遗留的一下问题

1. 当购物车有商品未结算时, 首页显示去结算按钮, 如果购物没有未结算按钮,那么则显示扫码按钮
2. 商品进行价格计算时, 小数点精确到多位的问题
3. 项目中各组件的封装
4. 代码优化
5. 解决余额大于商品金额时的问题



## 九、小程序支付功能

流程: 

	1. 当小程序启动的时候,我们需要使用wx.login获取小程序的code码
 	2. 获取到小程序的code码之后, 调用登录接口获取到用户信息以及openid
 	3. 将获取到的openid以及用户信息保存到本地
 	4. 在订单页,点击确认支付按钮, 调用统一下单接口,将统一下单接口所需要的参数发送给后台
 	5. 当统一下单接口调用成功之后, 后台会给我们返回微信支付所需要的参数
 	6. 当获取到支付所需要的参数之后,调用微信小程序内容的微信支付API来拉起支付, 把对应的支付参数传递过去,就能够完成支付功能



支付准备工作:

	1. 注册小程序的账号(不能是个人号, 个人号无法进行微信认证, 并且也无法开通微信支付)
 	2. 进行小程序的认证 (300/年)
 	3. 开通微信支付(填写支付所需要的信息)
 	4. 完成微信支付开通





前端业务: 

 1. 小程序启动的时候,调用wx.login方法获取凭证(code码)

 2. 调用自己登录接口,通过传递code码获取后台返回的openid以及其他信息

 3. 将openid以及其他相关信息保存到本地

 4. 点击确认支付按钮,调用统一下单接口

    



